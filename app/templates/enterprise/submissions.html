{% extends "base.html" %}

{% block title %}Submissions{% endblock %}

{% block content %}
<h1 class="text-2xl font-semibold mb-4">Your Products and Submissions</h1>
<div class="space-y-8">
  <div>
    <h2 class="text-lg font-semibold mb-2">Products</h2>
    {% if products %}
      <table class="w-full table-auto border-collapse text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="p-2 border">Name</th>
            <th class="p-2 border">Status</th>
            <th class="p-2 border">Created</th>
          </tr>
        </thead>
        <tbody>
          {% for prod in products %}
            <tr class="border-b">
              <td class="p-2 border">{{ prod.name }}</td>
              <td class="p-2 border capitalize">{{ prod.approval_status }}</td>
              <td class="p-2 border">{{ prod.created_at.strftime('%Y-%m-%d') if prod.created_at else '' }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-gray-500">No products submitted.</p>
    {% endif %}
  </div>

  <div>
    <h2 class="text-lg font-semibold mb-2">Product Submissions</h2>
    {% if submissions %}
      <table class="w-full table-auto border-collapse text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="p-2 border">Name</th>
            <th class="p-2 border">Status</th>
            <th class="p-2 border">Submitted</th>
          </tr>
        </thead>
        <tbody>
          {% for sub in submissions %}
            <tr class="border-b">
              <td class="p-2 border">{{ sub.name }}</td>
              <td class="p-2 border capitalize">{{ sub.status }}</td>
              <td class="p-2 border">{{ sub.last_checkin_at.strftime('%Y-%m-%d') if sub.last_checkin_at else '' }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-gray-500">No submissions.</p>
    {% endif %}
  </div>

  <div>
    <h2 class="text-lg font-semibold mb-2">Reports</h2>
    {% if reports %}
      <table class="w-full table-auto border-collapse text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="p-2 border">Target</th>
            <th class="p-2 border">Reason</th>
            <th class="p-2 border">Date</th>
          </tr>
        </thead>
        <tbody>
          {% for report in reports %}
            <tr class="border-b">
              <td class="p-2 border">{{ report.target_type }} {{ report.target_id }}</td>
              <td class="p-2 border">{{ report.reason }}</td>
              <td class="p-2 border">{{ report.created_at.strftime('%Y-%m-%d') if report.created_at else '' }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-gray-500">No reports filed.</p>
    {% endif %}
  </div>
</div>
{% endblock %}



